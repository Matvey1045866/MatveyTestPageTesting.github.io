<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Система входа и страниц</title>
  <style>
    * {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      padding: 20px;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    header {
      background-color: #007BFF;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    h1 {
      margin: 0;
      font-size: 1.5em;
    }
    .logout-btn {
      background-color: #dc3545;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
    }
    .login-form, .dashboard {
      padding: 20px;
    }
    input, textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    button {
      background-color: #28a745;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1em;
    }
    button:hover {
      background-color: #218837;
    }
    .pages {
      margin-top: 20px;
    }
    .page {
      border: 1px solid #eee;
      border-radius: 4px;
      padding: 15px;
      margin-bottom: 10px;
      background-color: #fafafa;
    }
    .page h3 {
      margin: 0 0 5px 0;
      color: #333;
    }
    .error {
      color: #dc3545;
      margin: 10px 0;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Форма входа -->
    <div id="login-form" class="login-form">
      <h2>Вход в систему</h2>
      <div id="error-message" class="error"></div>
      <input type="text" id="username" placeholder="Логин" required>
      <input type="password" id="password" placeholder="Пароль" required>
      <button onclick="login()">Войти</button>
    </div>

    <!-- Панель управления (скрыта до входа) -->
    <div id="dashboard" class="dashboard" style="display: none;">
      <header>
        <h1>Панель управления</h1>
        <button class="logout-btn" onclick="logout()">Выход</button>
      </header>

      <h2>Добавить страницу</h2>
      <input type="text" id="page-title" placeholder="Заголовок страницы">
      <textarea id="page-content" placeholder="Содержимое страницы" rows="4"></textarea>
      <button onclick="addPage()">Добавить страницу</button>

      <div class="pages" id="pages-list">
        <!-- Здесь будут отображаться страницы -->
      </div>
    </div>
  </div>

  <script>
    // Инициализация данных при первом запуске
    if (!localStorage.getItem('users')) {
      localStorage.setItem('users', JSON.stringify([
        { username: 'admin', password: '12345' }
      ]));
    }

    if (!localStorage.getItem('pages')) {
      localStorage.setItem('pages', JSON.stringify([]));
    }

    // Проверка авторизации при загрузке страницы
    window.onload = function() {
      if (localStorage.getItem('isLoggedIn') === 'true') {
        showDashboard();
      } else {
        showLogin();
      }
    };

    // Функция входа
    function login() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const users = JSON.parse(localStorage.getItem('users'));

      const user = users.find(u => u.username === username && u.password === password);

      if (user) {
        localStorage.setItem('isLogged cyn', 'true');
        showDashboard();
      } else {
        document.getElementById('error-message').textContent = 
          'Неверный логин или пароль!';
      }
    }

    // Функция выхода
    function logout() {
      localStorage.removeItem('isLoggedIn');
      showLogin();
    }

    // Показать форму входа
    function showLogin() {
      document.getElementById('login-form').style.display = 'block';
      document.getElementById('dashboard').style.display = 'none';
    }

    // Показать панель управления
    function showDashboard() {
      document.getElementById('login-form').style.display = 'none';
      document.getElementById('dashboard').style.display = 'block';
      loadPages();
    }

    // Добавить страницу
    function addPage() {
      const title = document.getElementById('page-title').value;
      const content = document.getElementById('page-content').value;

      if (!title || !content) {
        alert('Заполните все поля!');
        return;
      }

      const pages = JSON.parse(localStorage.getItem('pages'));
      pages.push({
        id: Date.now(), // Уникальный ID
        title: title,
        content: content
      });

      localStorage.setItem('pages', JSON.stringify(pages));

      // Очищаем поля
      document.getElementById('page-title').value = '';
      document.getElementById('page-content').value = '';

      // Обновляем список
      loadPages();
    }

    // Загрузить страницы из localStorage
    function loadPages() {
      const pages = JSON.parse(localStorage.getItem('pages'));
      const container = document.getElementById('pages-list');
      container.innerHTML = '';

      if (pages.length === 0) {
        container.innerHTML = '<p>Нет созданных страниц.</p>';
        return;
      }

      pages.forEach(page => {
        const pageElement = document.createElement('div');
        pageElement.className = 'page';
        pageElement.innerHTML = `
          <h3>${page.title}</h3>
          <p>${page.content}</p>
        `;
        container.appendChild(pageElement);
      });
    }
  </script>
</body>
</html>
